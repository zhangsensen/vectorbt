{
  "execution_time": 30.3818998336792,
  "analysis_approach": "final_working_vectorbt",
  "tested_symbols": [
    "0700.HK",
    "0005.HK",
    "0388.HK",
    "1211.HK",
    "0981.HK",
    "2015.HK",
    "0291.HK",
    "9888.HK",
    "0340.HK",
    "2018.HK"
  ],
  "tested_timeframes": [
    "5m",
    "10m"
  ],
  "working_config": {
    "test_timeframes": [
      "5m",
      "10m"
    ],
    "max_symbols": 10,
    "evaluation_mode": "cta",
    "min_ic_threshold": 0.005,
    "min_ir_threshold": 0.01,
    "min_sample_size": 10,
    "min_supporting_stocks": 2,
    "full_factor_pool": true,
    "debug_mode": true
  },
  "timeframe_results": {
    "5m": {
      "timeframe": "5m",
      "cta_results": "      symbol                factor  total_return    sharpe  raw_sharpe  win_rate  ...  trades  avg_trade_return  signal_strength  signal_count                  data_quality  annual_factor\n0    0700.HK                rsi_14      0.151178  0.058817    2.640899  0.564103  ...      39          0.004124         1.168509          2177              positive_returns      44.899889\n1    0700.HK        trend_strength      0.176945  0.070286    3.155841  0.511628  ...      43          0.004183         1.114173          1890              positive_returns      44.899889\n2    0700.HK  mean_reversion_score      0.280015  0.096069    4.313508  0.595238  ...      42          0.006403         1.076842          1810              positive_returns      44.899889\n3    0700.HK            volume_rsi      0.162650  0.062630    2.812065  0.533333  ...      45          0.003857         0.970683          1837              positive_returns      44.899889\n4    0700.HK   drawdown_volatility      0.139435  0.056281    2.527020  0.523810  ...      42          0.003586         1.276008          2142              positive_returns      44.899889\n..       ...                   ...           ...       ...         ...       ...  ...     ...               ...              ...           ...                           ...            ...\n485  2018.HK       composite_alpha      0.000000  0.000000    0.000000  0.000000  ...       0          0.000000         0.000000             0  failed: 夏普率过低: -1.286 ≤ -1.0       1.000000\n486  2018.HK      volume_intensity      0.000000  0.000000    0.000000  0.000000  ...       0          0.000000         0.000000             0  failed: 夏普率过低: -1.463 ≤ -1.0       1.000000\n487  2018.HK       liquidity_proxy      0.000000  0.000000    0.000000  0.000000  ...       0          0.000000         0.000000             0  failed: 夏普率过低: -1.694 ≤ -1.0       1.000000\n488  2018.HK    zscore_momentum_20     -0.022832  0.018469    0.829237  0.468254  ...     126          0.000861         0.968356          1665              positive_returns      44.899889\n489  2018.HK             hl_spread      0.000000  0.000000    0.000000  0.000000  ...       0          0.000000         0.000000             0  failed: 夏普率过低: -1.530 ≤ -1.0       1.000000\n\n[490 rows x 14 columns]",
      "factor_ranking": "                  factor  sharpe_mean  total_return_mean  raw_sharpe_mean  win_rate_mean  ...  trades_sum  avg_trade_return_mean  signal_strength_mean  signal_count_mean  rank\n0                  rsi_2       0.0716             0.4056           3.2129         0.5014  ...         360                 0.0035                1.0103          1542.5000     1\n1        composite_alpha       0.0666             0.4162           2.9899         0.5000  ...         418                 0.0031                0.9918          1849.7500     2\n2       keltner_position       0.0637             0.3711           2.8583         0.4957  ...         401                 0.0028                1.1241          2197.5000     3\n3   mean_reversion_score       0.0558             0.2020           2.5067         0.5036  ...         582                 0.0029                1.0774          1838.6667     4\n4                 cci_14       0.0535             0.2940           2.4023         0.4869  ...         480                 0.0024                1.0314          1761.4000     5\n5    volume_ma_deviation       0.0529             0.1961           2.3761         0.4971  ...         456                 0.0027                0.8907          1827.2000     6\n6       volume_intensity       0.0529             0.1961           2.3761         0.4971  ...         456                 0.0027                0.8907          1827.2000     7\n7          macd_enhanced       0.0520             0.1645           2.3351         0.5146  ...         367                 0.0028                1.1241          2139.0000     8\n8            rsi_14_rank       0.0507             0.2335           2.2760         0.4931  ...         474                 0.0024                1.1742          1836.8000     9\n9       price_efficiency       0.0477             0.1889           2.1405         0.4861  ...         530                 0.0024                0.8948          1684.2000    10\n10                rsi_14       0.0474             0.1775           2.1280         0.4923  ...         544                 0.0023                1.1670          2226.4000    11\n11                   vpt       0.0468             0.2626           2.0992         0.4876  ...         566                 0.0021                1.4320          2492.8333    12\n12    zscore_momentum_20       0.0464             0.1493           2.0849         0.4995  ...         565                 0.0024                0.9678          1652.6667    13\n13                roc_12       0.0462             0.2130           2.0753         0.4889  ...         417                 0.0021                1.1251          2116.5000    14\n14        vwap_deviation       0.0454             0.2157           2.0373         0.4816  ...         534                 0.0021                1.1207          2177.6000    15\n15   drawdown_volatility       0.0447             0.2293           2.0084         0.4885  ...         474                 0.0021                1.2796          2199.6000    16\n16               trix_14       0.0440             0.1444           1.9772         0.4960  ...         538                 0.0024                1.3409          2878.8333    17\n17               dema_14       0.0425             0.1498           1.9089         0.4787  ...         470                 0.0020                1.4564          2674.6000    18\n18               vw_macd       0.0403             0.1527           1.8094         0.4912  ...         473                 0.0020                0.9517          2356.8000    19\n19               ad_line       0.0400             0.1582           1.7964         0.4810  ...         601                 0.0018                1.4381          2638.5000    20\n20        trend_strength       0.0395             0.1509           1.7721         0.4819  ...         429                 0.0019                1.1126          1896.2000    21\n21      aroon_oscillator       0.0394             0.1529           1.7670         0.4857  ...         503                 0.0019                1.0912          1710.0000    22\n22             stoch_rsi       0.0389             0.1381           1.7481         0.4933  ...         417                 0.0020                0.9950          1634.6000    23\n23             hl_spread       0.0388             0.1509           1.7414         0.4897  ...         681                 0.0019                0.9066          1824.4286    24\n24              iv_proxy       0.0388             0.1509           1.7414         0.4897  ...         681                 0.0019                0.9066          1824.4286    25\n25      smart_money_flow       0.0387             0.1901           1.7374         0.4717  ...         650                 0.0016                0.9448          1684.6667    26\n26   vwap_deviation_rank       0.0387             0.1365           1.7361         0.4774  ...         479                 0.0017                1.1183          1743.6000    27\n27                   cmf       0.0386             0.1013           1.7327         0.5069  ...         309                 0.0022                1.1324          1974.4000    28\n28    macd_enhanced_rank       0.0385             0.1257           1.7279         0.4714  ...         586                 0.0017                1.1305          1619.0000    29\n29          rsi_enhanced       0.0384             0.0837           1.7249         0.4909  ...         435                 0.0022                0.8986          1801.4000    30\n30    momentum_composite       0.0382             0.1692           1.7137         0.4797  ...         546                 0.0019                1.0039          1932.4000    31\n31      volatility_ratio       0.0382             0.1188           1.7169         0.4795  ...         618                 0.0019                1.0236          1762.3333    32\n32         parkinson_vol       0.0379             0.1357           1.7018         0.4894  ...         681                 0.0019                0.9064          1822.4286    33\n33               rsi_100       0.0370             0.2174           1.6601         0.4887  ...         634                 0.0017                1.3412          2493.2857    34\n34       liquidity_proxy       0.0363             0.1437           1.6299         0.4981  ...         511                 0.0019                1.1086          1768.1429    35\n35            price_jump       0.0357             0.2043           1.6049         0.4747  ...         595                 0.0015                0.9428          1648.3333    36\n36               kama_14       0.0346             0.0726           1.5546         0.4788  ...         463                 0.0018                1.5509          2872.0000    37\n37                 roc_5       0.0346             0.1582           1.5531         0.4809  ...         675                 0.0017                1.0216          1900.0000    38\n38           skewness_60       0.0345             0.1116           1.5508         0.4856  ...         521                 0.0019                1.4175          2259.0000    39\n39            aroon_down       0.0342             0.0504           1.5335         0.4805  ...         354                 0.0018                1.0748          1524.7500    40\n40                adx_14       0.0330             0.1196           1.4824         0.4808  ...         558                 0.0016                1.3100          2375.5000    41\n41    vol_term_structure       0.0319             0.1417           1.4315         0.4783  ...         652                 0.0015                1.0614          1856.0000    42\n42            bb_squeeze       0.0315             0.1312           1.4148         0.4743  ...         653                 0.0015                1.2162          2097.2857    43\n43                  atrp       0.0286             0.0828           1.2854         0.4888  ...         779                 0.0016                1.1970          2219.6250    44\n44              aroon_up       0.0274             0.0666           1.2311         0.4701  ...         501                 0.0014                1.0720          1526.1667    45\n45            volume_rsi       0.0255             0.0177           1.1439         0.4966  ...         454                 0.0016                0.9715          1812.0000    46\n46             atrp_rank       0.0244             0.0496           1.0941         0.4763  ...         657                 0.0011                1.2166          1907.4286    47\n47          atr_enhanced       0.0240             0.0403           1.0793         0.4820  ...         546                 0.0013                0.9730          1811.1667    48\n48               tema_14       0.0220             0.0608           0.9892         0.4641  ...         735                 0.0009                1.4024          2492.1429    49\n\n[49 rows x 13 columns]",
      "valid_factors": "                 factor  sharpe_mean  total_return_mean  raw_sharpe_mean  win_rate_mean  ...  trades_sum  avg_trade_return_mean  signal_strength_mean  signal_count_mean  rank\n0                 rsi_2       0.0716             0.4056           3.2129         0.5014  ...         360                 0.0035                1.0103          1542.5000     1\n1       composite_alpha       0.0666             0.4162           2.9899         0.5000  ...         418                 0.0031                0.9918          1849.7500     2\n2      keltner_position       0.0637             0.3711           2.8583         0.4957  ...         401                 0.0028                1.1241          2197.5000     3\n3  mean_reversion_score       0.0558             0.2020           2.5067         0.5036  ...         582                 0.0029                1.0774          1838.6667     4\n4                cci_14       0.0535             0.2940           2.4023         0.4869  ...         480                 0.0024                1.0314          1761.4000     5\n5   volume_ma_deviation       0.0529             0.1961           2.3761         0.4971  ...         456                 0.0027                0.8907          1827.2000     6\n6      volume_intensity       0.0529             0.1961           2.3761         0.4971  ...         456                 0.0027                0.8907          1827.2000     7\n7         macd_enhanced       0.0520             0.1645           2.3351         0.5146  ...         367                 0.0028                1.1241          2139.0000     8\n8           rsi_14_rank       0.0507             0.2335           2.2760         0.4931  ...         474                 0.0024                1.1742          1836.8000     9\n\n[9 rows x 13 columns]",
      "summary": {
        "tested_symbols": 10,
        "tested_factors": 49,
        "total_evaluations": 490,
        "valid_factors_count": 9,
        "best_factor": "rsi_2",
        "best_sharpe": 0.0716
      }
    },
    "10m": {
      "timeframe": "10m",
      "cta_results": "      symbol                factor  total_return    sharpe  raw_sharpe  win_rate  ...  trades  avg_trade_return  signal_strength  signal_count                  data_quality  annual_factor\n0    0700.HK                rsi_14      0.203527  0.076602    3.439433  0.567568  ...      37          0.005568         1.204272          1139              positive_returns      44.899889\n1    0700.HK        trend_strength      0.112068  0.046830    2.102653  0.552632  ...      38          0.003350         1.123844           972              positive_returns      44.899889\n2    0700.HK  mean_reversion_score      0.126136  0.051472    2.311066  0.558824  ...      34          0.004059         1.113705          1031              positive_returns      44.899889\n3    0700.HK            volume_rsi      0.199916  0.075098    3.371892  0.575000  ...      40          0.005108         0.910476           824              positive_returns      44.899889\n4    0700.HK   drawdown_volatility      0.093336  0.042875    1.925079  0.538462  ...      39          0.002840         1.364629          1168              positive_returns      44.899889\n..       ...                   ...           ...       ...         ...       ...  ...     ...               ...              ...           ...                           ...            ...\n515  2018.HK       composite_alpha      0.000000  0.000000    0.000000  0.000000  ...       0          0.000000         0.000000             0  failed: 夏普率过低: -1.229 ≤ -1.0       1.000000\n516  2018.HK      volume_intensity      0.000000  0.000000    0.000000  0.000000  ...       0          0.000000         0.000000             0  failed: 夏普率过低: -4.524 ≤ -1.0       1.000000\n517  2018.HK       liquidity_proxy      0.000000  0.000000    0.000000  0.000000  ...       0          0.000000         0.000000             0  failed: 夏普率过低: -3.017 ≤ -1.0       1.000000\n518  2018.HK    zscore_momentum_20      0.014179  0.020586    0.924291  0.456311  ...     103          0.001018         0.943353           841              positive_returns      44.899889\n519  2018.HK             hl_spread      0.000000  0.000000    0.000000  0.000000  ...       0          0.000000         0.000000             0  failed: 夏普率过低: -1.934 ≤ -1.0       1.000000\n\n[520 rows x 14 columns]",
      "factor_ranking": "                  factor  sharpe_mean  total_return_mean  raw_sharpe_mean  win_rate_mean  ...  trades_sum  avg_trade_return_mean  signal_strength_mean  signal_count_mean  rank\n0          parkinson_vol       0.0601             0.3943           2.6973         0.4848  ...         508                 0.0028                0.8708           839.0000     1\n1              hl_spread       0.0584             0.3623           2.6220         0.4839  ...         506                 0.0027                0.8707           834.3333     2\n2               iv_proxy       0.0584             0.3623           2.6220         0.4839  ...         506                 0.0027                0.8707           834.3333     3\n3    volume_ma_deviation       0.0520             0.1580           2.3350         0.4899  ...         427                 0.0027                0.8736           838.0000     4\n4       volume_intensity       0.0520             0.1580           2.3350         0.4899  ...         427                 0.0027                0.8736           838.0000     5\n5                ad_line       0.0452             0.1262           2.0310         0.4920  ...         429                 0.0025                1.3820          1244.4000     6\n6    vwap_deviation_rank       0.0447             0.1385           2.0085         0.4935  ...         386                 0.0025                1.1827           946.2000     7\n7       volatility_ratio       0.0445             0.1538           1.9994         0.4793  ...         429                 0.0025                0.9986           847.6000     8\n8                 rsi_14       0.0431             0.1265           1.9352         0.4907  ...         595                 0.0024                1.2137          1177.0000     9\n9       price_efficiency       0.0423             0.1492           1.8985         0.4881  ...         547                 0.0022                0.8489           809.5000    10\n10                mfi_14       0.0422             0.1482           1.8943         0.4974  ...         474                 0.0022                1.1893          1108.8333    11\n11            volume_rsi       0.0416             0.1631           1.8699         0.4891  ...         541                 0.0022                0.9325           852.8333    12\n12                 rsi_2       0.0412             0.1266           1.8488         0.4938  ...         501                 0.0023                1.0124           802.8333    13\n13      smart_money_flow       0.0410             0.1136           1.8428         0.4861  ...         458                 0.0020                0.9327           861.6000    14\n14        trend_strength       0.0388             0.0915           1.7409         0.4955  ...         400                 0.0023                1.1329           955.8000    15\n15               kama_14       0.0384             0.1021           1.7260         0.4904  ...         552                 0.0023                1.5735          1475.5714    16\n16            bb_squeeze       0.0373             0.1519           1.6755         0.4820  ...         440                 0.0020                1.2524          1045.0000    17\n17           rsi_14_rank       0.0362             0.0886           1.6250         0.4894  ...         522                 0.0021                1.2287           983.2857    18\n18                adx_14       0.0354             0.0913           1.5894         0.4768  ...         424                 0.0017                1.3707          1301.2000    19\n19      keltner_position       0.0353             0.0899           1.5830         0.4897  ...         687                 0.0020                1.1662          1238.0000    20\n20                 roc_5       0.0346             0.0908           1.5549         0.4834  ...         406                 0.0019                1.0346          1011.2000    21\n21    momentum_composite       0.0326             0.1165           1.4648         0.4887  ...         596                 0.0019                1.0080           931.4286    22\n22       composite_alpha       0.0322             0.1158           1.4447         0.4840  ...         614                 0.0017                0.9876           974.5714    23\n23              aroon_up       0.0314             0.0716           1.4084         0.4865  ...         521                 0.0018                1.1082           795.7143    24\n24             stoch_rsi       0.0313             0.0813           1.4055         0.4850  ...         514                 0.0017                0.9968           785.8333    25\n25                   cmf       0.0307             0.0501           1.3803         0.4949  ...         588                 0.0018                1.2261          1100.1250    26\n26                   vpt       0.0304             0.0492           1.3637         0.4779  ...         483                 0.0017                1.3956          1128.8333    27\n27       momentum_regime       0.0301             0.1066           1.3535         0.4779  ...         439                 0.0015                0.8474           756.1667    28\n28    zscore_momentum_20       0.0289             0.0911           1.2986         0.4751  ...         697                 0.0017                0.9464           851.5000    29\n29            price_jump       0.0284             0.0459           1.2751         0.4842  ...         494                 0.0016                0.9123           821.1667    30\n30             atrp_rank       0.0280             0.1028           1.2557         0.4795  ...         513                 0.0017                1.1627           924.8571    31\n31    vol_term_structure       0.0277             0.0449           1.2419         0.4804  ...         463                 0.0016                1.0049           822.1667    32\n32        vwap_deviation       0.0275             0.0714           1.2330         0.4801  ...         600                 0.0015                1.1731          1216.0000    33\n33          rsi_enhanced       0.0270             0.0614           1.2110         0.4783  ...         432                 0.0015                0.8923           879.4000    34\n34      aroon_oscillator       0.0264             0.0464           1.1854         0.4823  ...         432                 0.0016                1.1375           936.3333    35\n35               rsi_100       0.0261             0.0456           1.1735         0.4836  ...         563                 0.0017                1.3315          1216.7143    36\n36          atr_enhanced       0.0253             0.0568           1.1365         0.4693  ...         545                 0.0014                0.9455           869.8333    37\n37         macd_enhanced       0.0249             0.0351           1.1162         0.4785  ...         501                 0.0014                1.1949          1258.3333    38\n38              willr_14       0.0234             0.0933           1.0515         0.4790  ...         553                 0.0011                1.1195           895.2857    39\n39    macd_enhanced_rank       0.0227             0.0474           1.0215         0.4902  ...         370                 0.0012                1.1982           913.8333    40\n40  mean_reversion_score       0.0225             0.0526           1.0106         0.4791  ...         585                 0.0013                1.1152          1053.7143    41\n41               trix_14       0.0212             0.0315           0.9500         0.4926  ...         222                 0.0013                1.4420          1535.0000    42\n42       liquidity_proxy       0.0206             0.0548           0.9229         0.4640  ...         412                 0.0011                1.4311           748.6000    43\n43                roc_12       0.0201             0.0258           0.9046         0.4704  ...         611                 0.0011                1.1605          1172.8571    44\n44                cci_14       0.0192             0.0079           0.8602         0.4777  ...         571                 0.0011                1.0566           962.0000    45\n45                  atrp       0.0187             0.0548           0.8379         0.4759  ...         449                 0.0011                1.1555          1136.1667    46\n46            aroon_down       0.0154             0.0230           0.6902         0.4824  ...         645                 0.0010                1.0847           790.0000    47\n47   drawdown_volatility       0.0146            -0.0031           0.6553         0.4903  ...         304                 0.0010                1.3555          1144.2000    48\n48               vw_macd       0.0116            -0.0102           0.5213         0.4658  ...         726                 0.0007                1.0204          1478.2500    49\n49           skewness_60       0.0096            -0.0287           0.4296         0.4698  ...         595                 0.0008                1.3853          1236.1429    50\n50               tema_14       0.0081            -0.0232           0.3641         0.4645  ...         518                 0.0006                1.4155          1299.6667    51\n51               dema_14       0.0075            -0.0282           0.3358         0.4698  ...         671                 0.0006                1.4734          1405.1250    52\n\n[52 rows x 13 columns]",
      "valid_factors": "                factor  sharpe_mean  total_return_mean  raw_sharpe_mean  win_rate_mean  ...  trades_sum  avg_trade_return_mean  signal_strength_mean  signal_count_mean  rank\n0        parkinson_vol       0.0601             0.3943           2.6973         0.4848  ...         508                 0.0028                0.8708           839.0000     1\n1            hl_spread       0.0584             0.3623           2.6220         0.4839  ...         506                 0.0027                0.8707           834.3333     2\n2             iv_proxy       0.0584             0.3623           2.6220         0.4839  ...         506                 0.0027                0.8707           834.3333     3\n3  volume_ma_deviation       0.0520             0.1580           2.3350         0.4899  ...         427                 0.0027                0.8736           838.0000     4\n4     volume_intensity       0.0520             0.1580           2.3350         0.4899  ...         427                 0.0027                0.8736           838.0000     5\n\n[5 rows x 13 columns]",
      "summary": {
        "tested_symbols": 10,
        "tested_factors": 52,
        "total_evaluations": 520,
        "valid_factors_count": 5,
        "best_factor": "parkinson_vol",
        "best_sharpe": 0.0601
      }
    }
  }
}